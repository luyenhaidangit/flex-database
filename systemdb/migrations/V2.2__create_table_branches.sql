-- Create BRANCHES table for branch management
CREATE TABLE BRANCHES (
    ID NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    CODE VARCHAR2(50) UNIQUE NOT NULL,
    NAME VARCHAR2(256) NOT NULL,
    BRANCH_TYPE NUMBER(10) NOT NULL,
    DESCRIPTION VARCHAR2(500),
    IS_ACTIVE CHAR(1) DEFAULT 'Y' NOT NULL,
    STATUS VARCHAR2(50) NOT NULL,
    CREATED_BY VARCHAR2(100),
    CREATED_DATE DATE DEFAULT SYSDATE,
    UPDATED_BY VARCHAR2(100),
    UPDATED_DATE DATE
);

-- Create BRANCH_REQUESTS table for approval workflow
CREATE TABLE BRANCH_REQUESTS (
    ID NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    ACTION VARCHAR2(20) NOT NULL, -- CREATE, UPDATE, DELETE
    ENTITY_ID NUMBER, -- Branch ID (0 for CREATE)
    STATUS VARCHAR2(10) NOT NULL, -- UNAUTHORISED, AUTHORISED, REJECTED
    REQUESTED_DATA CLOB NOT NULL, -- JSON data
    COMMENTS NVARCHAR2(500),
    REQUESTED_BY VARCHAR2(256) NOT NULL,
    REQUESTED_DATE DATE DEFAULT CURRENT_TIMESTAMP,
    APPROVED_BY VARCHAR2(256),
    APPROVE_DATE DATE
);
